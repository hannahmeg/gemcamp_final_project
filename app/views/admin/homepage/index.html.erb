<style>
    .collapsible-content {
        display: none;
    }
    .toggle-arrow {
        cursor: pointer;
        user-select: none;
    }
    .toggle-arrow::before {
        content: "▶";
        display: inline-block;
        margin-right: 0.5em;
    }
    .toggle-arrow.collapsed::before {
        content: "▼";
    }
</style>

<script>
    function toggleCollapsible(element) {
        const content = element.nextElementSibling;
        element.classList.toggle('collapsed');
        content.style.display = (content.style.display === 'block') ? 'none' : 'block';
    }
</script>

<body class="bg-zinc-100 font-sans leading-normal tracking-normal">
<div class="flex h-screen">
  <div class="bg-zinc-800 shadow-lg h-full w-64">
    <ul class="mt-6">
      <li class="p-2 hover:bg-zinc-700 cursor-pointer">Homepage</li>
      <li class="p-2 hover:bg-zinc-700 cursor-pointer">
        <span class="toggle-arrow" onclick="toggleCollapsible(this)">Member Management</span>
        <ul class="collapsible-content">
          <li><%= link_to "User List", admin_root_path %></li>
          <li><%= link_to "Item List", admin_items_path %></li>
        </ul>
      </li>
      <li class="p-2 hover:bg-zinc-700 cursor-pointer">
      <span class="toggle-arrow" onclick="toggleCollapsible(this)">Others</span>
      <ul class="collapsible-content">
        <li><%= link_to "Ticket List", admin_tickets_path %></li>
        <li>Example 2</li>
      </ul>
      </li>
    </ul>
  </div>
  <div class="flex-1 p-10 text-2xl font-bold">
    <header class="flex justify-between items-center p-5 bg-white shadow">
      <div class="text-lg">Admin Homepage</div>
      <div>
        <button class="bg-zinc-300 hover:bg-zinc-400 text-zinc-800 py-2 px-4 rounded inline-flex items-center mr-4">
          <span>Change Language</span>
        </button>
        <div class="relative inline-block text-left">
          <div>
            <button class="inline-flex justify-center w-full rounded-md border border-zinc-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-zinc-700 hover:bg-zinc-50" id="menu-button" aria-expanded="true" aria-haspopup="true">
              <%= current_admin_user.username %> ▼
            </button>
          </div>
          <div class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" id="menu-dropdown">
            <div class="py-1" role="none">
              <a href="#" class="text-zinc-700 block px-4 py-2 text-sm" role="menuitem">Profile</a>
              <%= link_to 'Sign out', destroy_user_session_path, data: { 'turbo-method': :delete }, class: "text-zinc-700 block px-4 py-2 text-sm" %>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="container mt-5">
      <% @users.each do |user| %>
        <div class="text-sm">
          <p><strong>Email:</strong> <%= user.email %></p>
          <p><strong>Parent Email:</strong> <%= user.parent&.email %></p>
          <p><strong>Total Deposit:</strong> <%= user.total_deposit %></p>
            <p><strong>Member Total Deposits:</strong> <%= user.children.sum(:total_deposit) %></p>
          <p><strong>Coins:</strong> <%= user.coins %></p>
            <p><strong>Total Used Coins:</strong> </p>
          <p><strong>Children Members:</strong> <%= user.children_members %></p>
          <hr>
        </div>
      <% end %>
      <%= paginate @users %>
    </div>
  </div>
</div>

<script>
    document.getElementById('menu-button').addEventListener('click', function() {
        var dropdown = document.getElementById('menu-dropdown');
        if (dropdown.classList.contains('hidden')) {
            dropdown.classList.remove('hidden');
        } else {
            dropdown.classList.add('hidden');
        }
    });
</script>

</body>


